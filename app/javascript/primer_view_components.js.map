{"version":3,"file":"primer_view_components.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../node_modules/@github/catalyst/lib/bind.js","../../../node_modules/@github/catalyst/lib/dasherize.js","../../../node_modules/@github/catalyst/lib/attr.js","../../../node_modules/@github/catalyst/lib/lazy-define.js","../../../node_modules/@github/catalyst/lib/core.js","../../../node_modules/@github/catalyst/lib/register.js","../../../node_modules/@github/catalyst/lib/auto-shadow-root.js","../../../node_modules/@github/catalyst/lib/target.js","../../../node_modules/@github/catalyst/lib/findtarget.js","../../../node_modules/@github/catalyst/lib/controller.js","../../components/primer/alpha/toggle_switch.ts","../../../node_modules/@primer/behaviors/dist/esm/utils/iterate-focusable-elements.mjs","../../../node_modules/@primer/behaviors/dist/esm/polyfills/event-listener-signal.mjs","../../../node_modules/@primer/behaviors/dist/esm/utils/user-agent.mjs","../../../node_modules/@primer/behaviors/dist/esm/utils/unique-id.mjs","../../../node_modules/@primer/behaviors/dist/esm/focus-zone.mjs","../../components/primer/alpha/tree_view/tree_view_roving_tab_index.ts","../../components/primer/alpha/tree_view/tree_view.ts","../../components/primer/utils.ts","../../components/primer/alpha/tree_view/tree_view_icon_pair_element.ts","../../components/primer/alpha/tree_view/tree_view_sub_tree_node_element.ts","../../../node_modules/@github/include-fragment-element/dist/include-fragment-element.js","../../../node_modules/@github/include-fragment-element/dist/include-fragment-element-define.js","../../components/primer/alpha/tree_view/tree_view_include_fragment_element.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","const controllers = new WeakSet();\n/*\n * Bind `[data-action]` elements from the DOM to their actions.\n *\n */\nexport function bind(controller) {\n    controllers.add(controller);\n    if (controller.shadowRoot)\n        bindShadow(controller.shadowRoot);\n    bindElements(controller);\n    listenForBind(controller.ownerDocument);\n}\nexport function bindShadow(root) {\n    bindElements(root);\n    listenForBind(root);\n}\nconst observers = new WeakMap();\n/**\n * Set up observer that will make sure any actions that are dynamically\n * injected into `el` will be bound to it's controller.\n *\n * This returns a Subscription object which you can call `unsubscribe()` on to\n * stop further live updates.\n */\nexport function listenForBind(el = document) {\n    if (observers.has(el))\n        return observers.get(el);\n    let closed = false;\n    const observer = new MutationObserver(mutations => {\n        for (const mutation of mutations) {\n            if (mutation.type === 'attributes' && mutation.target instanceof Element) {\n                bindActions(mutation.target);\n            }\n            else if (mutation.type === 'childList' && mutation.addedNodes.length) {\n                for (const node of mutation.addedNodes) {\n                    if (node instanceof Element) {\n                        bindElements(node);\n                    }\n                }\n            }\n        }\n    });\n    observer.observe(el, { childList: true, subtree: true, attributeFilter: ['data-action'] });\n    const subscription = {\n        get closed() {\n            return closed;\n        },\n        unsubscribe() {\n            closed = true;\n            observers.delete(el);\n            observer.disconnect();\n        }\n    };\n    observers.set(el, subscription);\n    return subscription;\n}\nfunction bindElements(root) {\n    for (const el of root.querySelectorAll('[data-action]')) {\n        bindActions(el);\n    }\n    // Also bind the controller to itself\n    if (root instanceof Element && root.hasAttribute('data-action')) {\n        bindActions(root);\n    }\n}\n// Bind a single function to all events to avoid anonymous closure performance penalty.\nfunction handleEvent(event) {\n    const el = event.currentTarget;\n    for (const binding of bindings(el)) {\n        if (event.type === binding.type) {\n            const controller = el.closest(binding.tag);\n            if (controllers.has(controller) && typeof controller[binding.method] === 'function') {\n                controller[binding.method](event);\n            }\n            const root = el.getRootNode();\n            if (root instanceof ShadowRoot && controllers.has(root.host) && root.host.matches(binding.tag)) {\n                const shadowController = root.host;\n                if (typeof shadowController[binding.method] === 'function') {\n                    shadowController[binding.method](event);\n                }\n            }\n        }\n    }\n}\nfunction* bindings(el) {\n    for (const action of (el.getAttribute('data-action') || '').trim().split(/\\s+/)) {\n        const eventSep = action.lastIndexOf(':');\n        const methodSep = Math.max(0, action.lastIndexOf('#')) || action.length;\n        yield {\n            type: action.slice(0, eventSep),\n            tag: action.slice(eventSep + 1, methodSep),\n            method: action.slice(methodSep + 1) || 'handleEvent'\n        } || 'handleEvent';\n    }\n}\nfunction bindActions(el) {\n    for (const binding of bindings(el)) {\n        el.addEventListener(binding.type, handleEvent);\n    }\n}\n//# sourceMappingURL=bind.js.map","export const dasherize = (str) => String(typeof str === 'symbol' ? str.description : str)\n    .replace(/([A-Z]($|[a-z]))/g, '-$1')\n    .replace(/--/g, '-')\n    .replace(/^-|-$/, '')\n    .toLowerCase();\nexport const mustDasherize = (str, type = 'property') => {\n    const dashed = dasherize(str);\n    if (!dashed.includes('-')) {\n        throw new DOMException(`${type}: ${String(str)} is not a valid ${type} name`, 'SyntaxError');\n    }\n    return dashed;\n};\n//# sourceMappingURL=dasherize.js.map","import { mustDasherize } from './dasherize.js';\nimport { meta } from './core.js';\nconst attrKey = 'attr';\n/**\n * Attr is a decorator which tags a property as one to be initialized via\n * `initializeAttrs`.\n *\n * The signature is typed such that the property must be one of a String,\n * Number or Boolean. This matches the behavior of `initializeAttrs`.\n */\nexport function attr(proto, key) {\n    meta(proto, attrKey).add(key);\n}\n/**\n * initializeAttrs is called with a set of class property names (if omitted, it\n * will look for any properties tagged with the `@attr` decorator). With this\n * list it defines property descriptors for each property that map to `data-*`\n * attributes on the HTMLElement instance.\n *\n * It works around Native Class Property semantics - which are equivalent to\n * calling `Object.defineProperty` on the instance upon creation, but before\n * `constructor()` is called.\n *\n * If a class property is assigned to the class body, it will infer the type\n * (using `typeof`) and define an appropriate getter/setter combo that aligns\n * to that type. This means class properties assigned to Numbers can only ever\n * be Numbers, assigned to Booleans can only ever be Booleans, and assigned to\n * Strings can only ever be Strings.\n *\n * This is automatically called as part of `@controller`. If a class uses the\n * `@controller` decorator it should not call this manually.\n */\nconst initialized = new WeakSet();\nexport function initializeAttrs(instance, names) {\n    if (initialized.has(instance))\n        return;\n    initialized.add(instance);\n    const proto = Object.getPrototypeOf(instance);\n    const prefix = proto?.constructor?.attrPrefix ?? 'data-';\n    if (!names)\n        names = meta(proto, attrKey);\n    for (const key of names) {\n        const value = instance[key];\n        const name = mustDasherize(`${prefix}${key}`);\n        let descriptor = {\n            configurable: true,\n            get() {\n                return this.getAttribute(name) || '';\n            },\n            set(newValue) {\n                this.setAttribute(name, newValue || '');\n            }\n        };\n        if (typeof value === 'number') {\n            descriptor = {\n                configurable: true,\n                get() {\n                    return Number(this.getAttribute(name) || 0);\n                },\n                set(newValue) {\n                    this.setAttribute(name, newValue);\n                }\n            };\n        }\n        else if (typeof value === 'boolean') {\n            descriptor = {\n                configurable: true,\n                get() {\n                    return this.hasAttribute(name);\n                },\n                set(newValue) {\n                    this.toggleAttribute(name, newValue);\n                }\n            };\n        }\n        Object.defineProperty(instance, key, descriptor);\n        if (key in instance && !instance.hasAttribute(name)) {\n            descriptor.set.call(instance, value);\n        }\n    }\n}\nexport function defineObservedAttributes(classObject) {\n    let observed = classObject.observedAttributes || [];\n    const prefix = classObject.attrPrefix ?? 'data-';\n    const attrToAttributeName = (name) => mustDasherize(`${prefix}${name}`);\n    Object.defineProperty(classObject, 'observedAttributes', {\n        configurable: true,\n        get() {\n            return [...meta(classObject.prototype, attrKey)].map(attrToAttributeName).concat(observed);\n        },\n        set(attributes) {\n            observed = attributes;\n        }\n    });\n}\n//# sourceMappingURL=attr.js.map","const dynamicElements = new Map();\nconst ready = new Promise(resolve => {\n    if (document.readyState !== 'loading') {\n        resolve();\n    }\n    else {\n        document.addEventListener('readystatechange', () => resolve(), { once: true });\n    }\n});\nconst firstInteraction = new Promise(resolve => {\n    const controller = new AbortController();\n    controller.signal.addEventListener('abort', () => resolve());\n    const listenerOptions = { once: true, passive: true, signal: controller.signal };\n    const handler = () => controller.abort();\n    document.addEventListener('mousedown', handler, listenerOptions);\n    // eslint-disable-next-line github/require-passive-events\n    document.addEventListener('touchstart', handler, listenerOptions);\n    document.addEventListener('keydown', handler, listenerOptions);\n    document.addEventListener('pointerdown', handler, listenerOptions);\n});\nconst visible = (tagName) => new Promise(resolve => {\n    const observer = new IntersectionObserver(entries => {\n        for (const entry of entries) {\n            if (entry.isIntersecting) {\n                resolve();\n                observer.disconnect();\n                return;\n            }\n        }\n    }, {\n        // Currently the threshold is set to 256px from the bottom of the viewport\n        // with a threshold of 0.1. This means the element will not load until about\n        // 2 keyboard-down-arrow presses away from being visible in the viewport,\n        // giving us some time to fetch it before the contents are made visible\n        rootMargin: '0px 0px 256px 0px',\n        threshold: 0.01\n    });\n    for (const el of document.querySelectorAll(tagName)) {\n        observer.observe(el);\n    }\n});\nconst strategies = {\n    ready: () => ready,\n    firstInteraction: () => firstInteraction,\n    visible\n};\nconst timers = new WeakMap();\nfunction scan(element) {\n    cancelAnimationFrame(timers.get(element) || 0);\n    timers.set(element, requestAnimationFrame(() => {\n        for (const tagName of dynamicElements.keys()) {\n            const child = element instanceof Element && element.matches(tagName) ? element : element.querySelector(tagName);\n            if (customElements.get(tagName) || child) {\n                const strategyName = (child?.getAttribute('data-load-on') || 'ready');\n                const strategy = strategyName in strategies ? strategies[strategyName] : strategies.ready;\n                // eslint-disable-next-line github/no-then\n                for (const cb of dynamicElements.get(tagName) || [])\n                    strategy(tagName).then(cb);\n                dynamicElements.delete(tagName);\n                timers.delete(element);\n            }\n        }\n    }));\n}\nlet elementLoader;\nexport function lazyDefine(tagNameOrObj, singleCallback) {\n    if (typeof tagNameOrObj === 'string' && singleCallback) {\n        tagNameOrObj = { [tagNameOrObj]: singleCallback };\n    }\n    for (const [tagName, callback] of Object.entries(tagNameOrObj)) {\n        if (!dynamicElements.has(tagName))\n            dynamicElements.set(tagName, new Set());\n        dynamicElements.get(tagName).add(callback);\n    }\n    observe(document);\n}\nexport function observe(target) {\n    elementLoader || (elementLoader = new MutationObserver(mutations => {\n        if (!dynamicElements.size)\n            return;\n        for (const mutation of mutations) {\n            for (const node of mutation.addedNodes) {\n                if (node instanceof Element)\n                    scan(node);\n            }\n        }\n    }));\n    scan(target);\n    elementLoader.observe(target, { subtree: true, childList: true });\n}\n//# sourceMappingURL=lazy-define.js.map","import { register } from './register.js';\nimport { bind, bindShadow } from './bind.js';\nimport { autoShadowRoot } from './auto-shadow-root.js';\nimport { defineObservedAttributes, initializeAttrs } from './attr.js';\nimport { observe } from './lazy-define.js';\nconst symbol = Symbol.for('catalyst');\nexport class CatalystDelegate {\n    constructor(classObject) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const delegate = this;\n        const connectedCallback = classObject.prototype.connectedCallback;\n        classObject.prototype.connectedCallback = function () {\n            delegate.connectedCallback(this, connectedCallback);\n        };\n        const disconnectedCallback = classObject.prototype.disconnectedCallback;\n        classObject.prototype.disconnectedCallback = function () {\n            delegate.disconnectedCallback(this, disconnectedCallback);\n        };\n        const attributeChangedCallback = classObject.prototype.attributeChangedCallback;\n        classObject.prototype.attributeChangedCallback = function (name, oldValue, newValue) {\n            delegate.attributeChangedCallback(this, name, oldValue, newValue, attributeChangedCallback);\n        };\n        let observedAttributes = classObject.observedAttributes || [];\n        Object.defineProperty(classObject, 'observedAttributes', {\n            configurable: true,\n            get() {\n                return delegate.observedAttributes(this, observedAttributes);\n            },\n            set(attributes) {\n                observedAttributes = attributes;\n            }\n        });\n        defineObservedAttributes(classObject);\n        register(classObject);\n    }\n    observedAttributes(instance, observedAttributes) {\n        return observedAttributes;\n    }\n    connectedCallback(instance, connectedCallback) {\n        instance.toggleAttribute('data-catalyst', true);\n        customElements.upgrade(instance);\n        autoShadowRoot(instance);\n        initializeAttrs(instance);\n        bind(instance);\n        connectedCallback?.call(instance);\n        if (instance.shadowRoot) {\n            bindShadow(instance.shadowRoot);\n            observe(instance.shadowRoot);\n        }\n    }\n    disconnectedCallback(element, disconnectedCallback) {\n        disconnectedCallback?.call(element);\n    }\n    attributeChangedCallback(instance, name, oldValue, newValue, attributeChangedCallback) {\n        initializeAttrs(instance);\n        if (name !== 'data-catalyst' && attributeChangedCallback) {\n            attributeChangedCallback.call(instance, name, oldValue, newValue);\n        }\n    }\n}\nexport function meta(proto, name) {\n    if (!Object.prototype.hasOwnProperty.call(proto, symbol)) {\n        const parent = proto[symbol];\n        const map = (proto[symbol] = new Map());\n        if (parent) {\n            for (const [key, value] of parent) {\n                map.set(key, new Set(value));\n            }\n        }\n    }\n    const map = proto[symbol];\n    if (!map.has(name))\n        map.set(name, new Set());\n    return map.get(name);\n}\n//# sourceMappingURL=core.js.map","import { dasherize } from './dasherize.js';\n/**\n * Register the controller as a custom element.\n *\n * The classname is converted to a approriate tag name.\n *\n * Example: HelloController => hello-controller\n */\nexport function register(classObject) {\n    const name = dasherize(classObject.name).replace(/-element$/, '');\n    try {\n        window.customElements.define(name, classObject);\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        window[classObject.name] = customElements.get(name);\n    }\n    catch (e) {\n        // The only reason for window.customElements.define to throw a `NotSupportedError`\n        // is if the element has already been defined.\n        if (!(e instanceof DOMException && e.name === 'NotSupportedError'))\n            throw e;\n    }\n    return classObject;\n}\n//# sourceMappingURL=register.js.map","export function autoShadowRoot(element) {\n    for (const template of element.querySelectorAll('template[data-shadowroot]')) {\n        if (template.parentElement === element) {\n            element\n                .attachShadow({\n                mode: template.getAttribute('data-shadowroot') === 'closed' ? 'closed' : 'open'\n            })\n                .append(template.content.cloneNode(true));\n        }\n    }\n}\n//# sourceMappingURL=auto-shadow-root.js.map","import { findTarget, findTargets } from './findtarget.js';\nimport { meta } from './core.js';\n/**\n * Target is a decorator which - when assigned to a property field on the\n * class - will override that class field, turning it into a Getter which\n * returns a call to `findTarget(this, key)` where `key` is the name of the\n * property field. In other words, `@target foo` becomes a getter for\n * `findTarget(this, 'foo')`.\n */\nexport function target(proto, key) {\n    meta(proto, 'target').add(key);\n    Object.defineProperty(proto, key, {\n        configurable: true,\n        get() {\n            return findTarget(this, key);\n        }\n    });\n}\n/**\n * Targets is a decorator which - when assigned to a property field on the\n * class - will override that class field, turning it into a Getter which\n * returns a call to `findTargets(this, key)` where `key` is the name of the\n * property field. In other words, `@targets foo` becomes a getter for\n * `findTargets(this, 'foo')`.\n */\nexport function targets(proto, key) {\n    meta(proto, 'targets').add(key);\n    Object.defineProperty(proto, key, {\n        configurable: true,\n        get() {\n            return findTargets(this, key);\n        }\n    });\n}\n//# sourceMappingURL=target.js.map","/**\n * findTarget will run `querySelectorAll` against the given controller, plus\n * its shadowRoot, returning any the first child that:\n *\n *  - Matches the selector of `[data-target~=\"tag.name\"]` where tag is the\n *  tagName of the given HTMLElement, and `name` is the given `name` argument.\n *\n *  - Closest ascendant of the element, that matches the tagname of the\n *  controller, is the specific instance of the controller itself - in other\n *  words it is not nested in other controllers of the same type.\n *\n */\nexport function findTarget(controller, name) {\n    const tag = controller.tagName.toLowerCase();\n    if (controller.shadowRoot) {\n        for (const el of controller.shadowRoot.querySelectorAll(`[data-target~=\"${tag}.${name}\"]`)) {\n            if (!el.closest(tag))\n                return el;\n        }\n    }\n    for (const el of controller.querySelectorAll(`[data-target~=\"${tag}.${name}\"]`)) {\n        if (el.closest(tag) === controller)\n            return el;\n    }\n}\nexport function findTargets(controller, name) {\n    const tag = controller.tagName.toLowerCase();\n    const targets = [];\n    if (controller.shadowRoot) {\n        for (const el of controller.shadowRoot.querySelectorAll(`[data-targets~=\"${tag}.${name}\"]`)) {\n            if (!el.closest(tag))\n                targets.push(el);\n        }\n    }\n    for (const el of controller.querySelectorAll(`[data-targets~=\"${tag}.${name}\"]`)) {\n        if (el.closest(tag) === controller)\n            targets.push(el);\n    }\n    return targets;\n}\n//# sourceMappingURL=findtarget.js.map","import { CatalystDelegate } from './core.js';\n/**\n * Controller is a decorator to be used over a class that extends HTMLElement.\n * It will automatically `register()` the component in the customElement\n * registry, as well as ensuring `bind(this)` is called on `connectedCallback`,\n * wrapping the classes `connectedCallback` method if needed.\n */\nexport function controller(classObject) {\n    new CatalystDelegate(classObject);\n}\n//# sourceMappingURL=controller.js.map","import {controller, target, attr} from '@github/catalyst'\n\n@controller\nclass ToggleSwitchElement extends HTMLElement {\n  @target switch: HTMLElement\n  @target loadingSpinner: HTMLElement\n  @target errorIcon: HTMLElement\n  @attr turbo = false\n\n  private toggling = false\n\n  get src(): string | null {\n    const src = this.getAttribute('src')\n    if (!src) return null\n\n    const link = this.ownerDocument.createElement('a')\n    link.href = src\n    return link.href\n  }\n\n  get csrf(): string | null {\n    const csrfElement = this.querySelector('[data-csrf]')\n    return this.getAttribute('data-csrf') || (csrfElement instanceof HTMLInputElement && csrfElement.value) || null\n  }\n\n  get csrfField(): string {\n    // the authenticity token is passed into the element and is not generated in js land\n\n    return this.getAttribute('csrf-field') || 'authenticity_token'\n  }\n\n  isRemote(): boolean {\n    return this.src != null\n  }\n\n  async toggle() {\n    if (this.toggling) return\n\n    this.toggling = true\n\n    if (this.isDisabled()) {\n      return\n    }\n\n    if (!this.isRemote()) {\n      this.performToggle()\n      this.toggling = false\n      return\n    }\n\n    // toggle immediately to tell screen readers the switch was clicked\n    this.performToggle()\n    this.setLoadingState()\n\n    try {\n      await this.submitForm()\n    } catch (error) {\n      if (error instanceof Error) {\n        // because we toggle immediately when the switch is clicked, toggle back to the\n        // old state on failure\n        this.setErrorState(error.message || 'An error occurred, please try again.')\n        this.performToggle()\n      }\n\n      return\n    } finally {\n      this.toggling = false\n    }\n\n    this.setSuccessState()\n  }\n\n  turnOn(): void {\n    if (this.isDisabled()) {\n      return\n    }\n\n    this.switch.setAttribute('aria-pressed', 'true')\n    this.classList.add('ToggleSwitch--checked')\n  }\n\n  turnOff(): void {\n    if (this.isDisabled()) {\n      return\n    }\n\n    this.switch.setAttribute('aria-pressed', 'false')\n    this.classList.remove('ToggleSwitch--checked')\n  }\n\n  isOn(): boolean {\n    return this.switch.getAttribute('aria-pressed') === 'true'\n  }\n\n  isOff(): boolean {\n    return !this.isOn()\n  }\n\n  isDisabled(): boolean {\n    return this.switch.getAttribute('disabled') != null\n  }\n\n  disable(): void {\n    this.switch.setAttribute('disabled', 'disabled')\n  }\n\n  enable(): void {\n    this.switch.removeAttribute('disabled')\n  }\n\n  private performToggle(): void {\n    if (this.isOn()) {\n      this.turnOff()\n    } else {\n      this.turnOn()\n    }\n  }\n\n  private setLoadingState(): void {\n    this.errorIcon.setAttribute('hidden', 'hidden')\n    this.loadingSpinner.removeAttribute('hidden')\n\n    const event = new CustomEvent('toggleSwitchLoading', {bubbles: true})\n    this.dispatchEvent(event)\n  }\n\n  private setSuccessState(): void {\n    const event = new CustomEvent('toggleSwitchSuccess', {bubbles: true})\n    this.dispatchEvent(event)\n\n    this.setFinishedState(false)\n  }\n\n  private setErrorState(message: string): void {\n    const event = new CustomEvent('toggleSwitchError', {bubbles: true, detail: message})\n    this.dispatchEvent(event)\n\n    this.setFinishedState(true)\n  }\n\n  private setFinishedState(error: boolean): void {\n    if (error) {\n      this.errorIcon.removeAttribute('hidden')\n    }\n\n    this.loadingSpinner.setAttribute('hidden', 'hidden')\n  }\n\n  private async submitForm() {\n    const body = new FormData()\n\n    if (this.csrf) {\n      body.append(this.csrfField, this.csrf)\n    }\n\n    body.append('value', this.isOn() ? '1' : '0')\n\n    if (!this.src) throw new Error('invalid src')\n\n    let response\n\n    const requestHeaders: {[key: string]: string} = {\n      'Requested-With': 'XMLHttpRequest',\n      'X-Requested-With': 'XMLHttpRequest',\n    }\n\n    if (this.turbo) {\n      requestHeaders['Accept'] = 'text/vnd.turbo-stream.html'\n    }\n\n    try {\n      response = await fetch(this.src, {\n        credentials: 'same-origin',\n        method: 'POST',\n        headers: requestHeaders,\n        body,\n      })\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    } catch (error) {\n      throw new Error('A network error occurred, please try again.')\n    }\n\n    if (!response.ok) {\n      throw new Error(await response.text())\n    }\n\n    const contentType = response.headers.get('Content-Type')\n    if (window.Turbo && this.turbo && contentType?.startsWith('text/vnd.turbo-stream.html')) {\n      window.Turbo.renderStreamMessage(await response.text())\n    }\n  }\n}\n\ndeclare global {\n  interface Window {\n    Turbo: {\n      renderStreamMessage: (message: string) => void\n    }\n  }\n}\n","function* iterateFocusableElements(container, options = {}) {\n    var _a, _b;\n    const strict = (_a = options.strict) !== null && _a !== void 0 ? _a : false;\n    const acceptFn = ((_b = options.onlyTabbable) !== null && _b !== void 0 ? _b : false) ? isTabbable : isFocusable;\n    const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n        acceptNode: node => node instanceof HTMLElement && acceptFn(node, strict) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP,\n    });\n    let nextNode = null;\n    if (!options.reverse && acceptFn(container, strict)) {\n        yield container;\n    }\n    if (options.reverse) {\n        let lastChild = walker.lastChild();\n        while (lastChild) {\n            nextNode = lastChild;\n            lastChild = walker.lastChild();\n        }\n    }\n    else {\n        nextNode = walker.firstChild();\n    }\n    while (nextNode instanceof HTMLElement) {\n        yield nextNode;\n        nextNode = options.reverse ? walker.previousNode() : walker.nextNode();\n    }\n    if (options.reverse && acceptFn(container, strict)) {\n        yield container;\n    }\n    return undefined;\n}\nfunction getFocusableChild(container, lastChild = false) {\n    return iterateFocusableElements(container, { reverse: lastChild, strict: true, onlyTabbable: true }).next().value;\n}\nfunction isFocusable(elem, strict = false) {\n    const disabledAttrInert = ['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA', 'OPTGROUP', 'OPTION', 'FIELDSET'].includes(elem.tagName) &&\n        elem.disabled;\n    const hiddenInert = elem.hidden;\n    const hiddenInputInert = elem instanceof HTMLInputElement && elem.type === 'hidden';\n    const sentinelInert = elem.classList.contains('sentinel');\n    if (disabledAttrInert || hiddenInert || hiddenInputInert || sentinelInert) {\n        return false;\n    }\n    if (strict) {\n        const style = getComputedStyle(elem);\n        const sizeInert = elem.offsetWidth === 0 || elem.offsetHeight === 0;\n        const visibilityInert = ['hidden', 'collapse'].includes(style.visibility);\n        const displayInert = style.display === 'none' || !elem.offsetParent;\n        const clientRectsInert = elem.getClientRects().length === 0;\n        if (sizeInert || visibilityInert || clientRectsInert || displayInert) {\n            return false;\n        }\n    }\n    if (elem.getAttribute('tabindex') != null) {\n        return true;\n    }\n    if (elem.getAttribute('contenteditable') === 'true' || elem.getAttribute('contenteditable') === 'plaintext-only') {\n        return true;\n    }\n    if (elem instanceof HTMLAnchorElement && elem.getAttribute('href') == null) {\n        return false;\n    }\n    return elem.tabIndex !== -1;\n}\nfunction isTabbable(elem, strict = false) {\n    return isFocusable(elem, strict) && elem.getAttribute('tabindex') !== '-1';\n}\n\nexport { getFocusableChild, isFocusable, isTabbable, iterateFocusableElements };\n","let signalSupported = false;\nfunction noop() { }\ntry {\n    const options = Object.create({}, {\n        signal: {\n            get() {\n                signalSupported = true;\n            },\n        },\n    });\n    window.addEventListener('test', noop, options);\n    window.removeEventListener('test', noop, options);\n}\ncatch (e) {\n}\nfunction featureSupported() {\n    return signalSupported;\n}\nfunction monkeyPatch() {\n    if (typeof window === 'undefined') {\n        return;\n    }\n    const originalAddEventListener = EventTarget.prototype.addEventListener;\n    EventTarget.prototype.addEventListener = function (name, originalCallback, optionsOrCapture) {\n        if (typeof optionsOrCapture === 'object' &&\n            'signal' in optionsOrCapture &&\n            optionsOrCapture.signal instanceof AbortSignal) {\n            originalAddEventListener.call(optionsOrCapture.signal, 'abort', () => {\n                this.removeEventListener(name, originalCallback, optionsOrCapture);\n            });\n        }\n        return originalAddEventListener.call(this, name, originalCallback, optionsOrCapture);\n    };\n}\nfunction polyfill() {\n    if (!featureSupported()) {\n        monkeyPatch();\n        signalSupported = true;\n    }\n}\n\nexport { polyfill };\n","let isMac = undefined;\nfunction isMacOS() {\n    if (isMac === undefined) {\n        isMac = /^mac/i.test(window.navigator.platform);\n    }\n    return isMac;\n}\n\nexport { isMacOS };\n","let idSeed = 10000;\nfunction uniqueId() {\n    return `__primer_id_${idSeed++}`;\n}\n\nexport { uniqueId };\n","import { polyfill } from './polyfills/event-listener-signal.mjs';\nimport { isMacOS } from './utils/user-agent.mjs';\nimport { iterateFocusableElements } from './utils/iterate-focusable-elements.mjs';\nimport { uniqueId } from './utils/unique-id.mjs';\n\npolyfill();\nvar FocusKeys;\n(function (FocusKeys) {\n    FocusKeys[FocusKeys[\"ArrowHorizontal\"] = 1] = \"ArrowHorizontal\";\n    FocusKeys[FocusKeys[\"ArrowVertical\"] = 2] = \"ArrowVertical\";\n    FocusKeys[FocusKeys[\"JK\"] = 4] = \"JK\";\n    FocusKeys[FocusKeys[\"HL\"] = 8] = \"HL\";\n    FocusKeys[FocusKeys[\"HomeAndEnd\"] = 16] = \"HomeAndEnd\";\n    FocusKeys[FocusKeys[\"PageUpDown\"] = 256] = \"PageUpDown\";\n    FocusKeys[FocusKeys[\"WS\"] = 32] = \"WS\";\n    FocusKeys[FocusKeys[\"AD\"] = 64] = \"AD\";\n    FocusKeys[FocusKeys[\"Tab\"] = 128] = \"Tab\";\n    FocusKeys[FocusKeys[\"Backspace\"] = 512] = \"Backspace\";\n    FocusKeys[FocusKeys[\"ArrowAll\"] = 3] = \"ArrowAll\";\n    FocusKeys[FocusKeys[\"HJKL\"] = 12] = \"HJKL\";\n    FocusKeys[FocusKeys[\"WASD\"] = 96] = \"WASD\";\n    FocusKeys[FocusKeys[\"All\"] = 511] = \"All\";\n})(FocusKeys || (FocusKeys = {}));\nconst KEY_TO_BIT = {\n    ArrowLeft: FocusKeys.ArrowHorizontal,\n    ArrowDown: FocusKeys.ArrowVertical,\n    ArrowUp: FocusKeys.ArrowVertical,\n    ArrowRight: FocusKeys.ArrowHorizontal,\n    h: FocusKeys.HL,\n    j: FocusKeys.JK,\n    k: FocusKeys.JK,\n    l: FocusKeys.HL,\n    a: FocusKeys.AD,\n    s: FocusKeys.WS,\n    w: FocusKeys.WS,\n    d: FocusKeys.AD,\n    Tab: FocusKeys.Tab,\n    Home: FocusKeys.HomeAndEnd,\n    End: FocusKeys.HomeAndEnd,\n    PageUp: FocusKeys.PageUpDown,\n    PageDown: FocusKeys.PageUpDown,\n    Backspace: FocusKeys.Backspace,\n};\nconst KEY_TO_DIRECTION = {\n    ArrowLeft: 'previous',\n    ArrowDown: 'next',\n    ArrowUp: 'previous',\n    ArrowRight: 'next',\n    h: 'previous',\n    j: 'next',\n    k: 'previous',\n    l: 'next',\n    a: 'previous',\n    s: 'next',\n    w: 'previous',\n    d: 'next',\n    Tab: 'next',\n    Home: 'start',\n    End: 'end',\n    PageUp: 'start',\n    PageDown: 'end',\n    Backspace: 'previous',\n};\nfunction getDirection(keyboardEvent) {\n    const direction = KEY_TO_DIRECTION[keyboardEvent.key];\n    if (keyboardEvent.key === 'Tab' && keyboardEvent.shiftKey) {\n        return 'previous';\n    }\n    const isMac = isMacOS();\n    if ((isMac && keyboardEvent.metaKey) || (!isMac && keyboardEvent.ctrlKey)) {\n        if (keyboardEvent.key === 'ArrowLeft' || keyboardEvent.key === 'ArrowUp') {\n            return 'start';\n        }\n        else if (keyboardEvent.key === 'ArrowRight' || keyboardEvent.key === 'ArrowDown') {\n            return 'end';\n        }\n    }\n    return direction;\n}\nfunction shouldIgnoreFocusHandling(keyboardEvent, activeElement) {\n    const key = keyboardEvent.key;\n    const keyLength = [...key].length;\n    const isTextInput = (activeElement instanceof HTMLInputElement && activeElement.type === 'text') ||\n        activeElement instanceof HTMLTextAreaElement;\n    if (isTextInput && (keyLength === 1 || key === 'Home' || key === 'End')) {\n        return true;\n    }\n    if (activeElement instanceof HTMLSelectElement) {\n        if (keyLength === 1) {\n            return true;\n        }\n        if (key === 'ArrowDown' && isMacOS() && !keyboardEvent.metaKey) {\n            return true;\n        }\n        if (key === 'ArrowDown' && !isMacOS() && keyboardEvent.altKey) {\n            return true;\n        }\n    }\n    if (activeElement instanceof HTMLTextAreaElement && (key === 'PageUp' || key === 'PageDown')) {\n        return true;\n    }\n    if (isTextInput) {\n        const textInput = activeElement;\n        const cursorAtStart = textInput.selectionStart === 0 && textInput.selectionEnd === 0;\n        const cursorAtEnd = textInput.selectionStart === textInput.value.length && textInput.selectionEnd === textInput.value.length;\n        if (key === 'ArrowLeft' && !cursorAtStart) {\n            return true;\n        }\n        if (key === 'ArrowRight' && !cursorAtEnd) {\n            return true;\n        }\n        if (textInput instanceof HTMLTextAreaElement) {\n            if (key === 'ArrowUp' && !cursorAtStart) {\n                return true;\n            }\n            if (key === 'ArrowDown' && !cursorAtEnd) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nconst isActiveDescendantAttribute = 'data-is-active-descendant';\nconst activeDescendantActivatedDirectly = 'activated-directly';\nconst activeDescendantActivatedIndirectly = 'activated-indirectly';\nconst hasActiveDescendantAttribute = 'data-has-active-descendant';\nfunction focusZone(container, settings) {\n    var _a, _b, _c, _d, _e;\n    const focusableElements = [];\n    const savedTabIndex = new WeakMap();\n    const bindKeys = (_a = settings === null || settings === void 0 ? void 0 : settings.bindKeys) !== null && _a !== void 0 ? _a : ((settings === null || settings === void 0 ? void 0 : settings.getNextFocusable) ? FocusKeys.ArrowAll : FocusKeys.ArrowVertical) | FocusKeys.HomeAndEnd;\n    const focusOutBehavior = (_b = settings === null || settings === void 0 ? void 0 : settings.focusOutBehavior) !== null && _b !== void 0 ? _b : 'stop';\n    const focusInStrategy = (_c = settings === null || settings === void 0 ? void 0 : settings.focusInStrategy) !== null && _c !== void 0 ? _c : 'previous';\n    const activeDescendantControl = settings === null || settings === void 0 ? void 0 : settings.activeDescendantControl;\n    const activeDescendantCallback = settings === null || settings === void 0 ? void 0 : settings.onActiveDescendantChanged;\n    let currentFocusedElement;\n    const preventScroll = (_d = settings === null || settings === void 0 ? void 0 : settings.preventScroll) !== null && _d !== void 0 ? _d : false;\n    function getFirstFocusableElement() {\n        return focusableElements[0];\n    }\n    function isActiveDescendantInputFocused() {\n        return document.activeElement === activeDescendantControl;\n    }\n    function updateFocusedElement(to, directlyActivated = false) {\n        const from = currentFocusedElement;\n        currentFocusedElement = to;\n        if (activeDescendantControl) {\n            if (to && isActiveDescendantInputFocused()) {\n                setActiveDescendant(from, to, directlyActivated);\n            }\n            else {\n                clearActiveDescendant();\n            }\n            return;\n        }\n        if (from && from !== to && savedTabIndex.has(from)) {\n            from.setAttribute('tabindex', '-1');\n        }\n        to === null || to === void 0 ? void 0 : to.setAttribute('tabindex', '0');\n    }\n    function setActiveDescendant(from, to, directlyActivated = false) {\n        if (!to.id) {\n            to.setAttribute('id', uniqueId());\n        }\n        if (from && from !== to) {\n            from.removeAttribute(isActiveDescendantAttribute);\n        }\n        if (!activeDescendantControl ||\n            (!directlyActivated && activeDescendantControl.getAttribute('aria-activedescendant') === to.id)) {\n            return;\n        }\n        activeDescendantControl.setAttribute('aria-activedescendant', to.id);\n        container.setAttribute(hasActiveDescendantAttribute, to.id);\n        to.setAttribute(isActiveDescendantAttribute, directlyActivated ? activeDescendantActivatedDirectly : activeDescendantActivatedIndirectly);\n        activeDescendantCallback === null || activeDescendantCallback === void 0 ? void 0 : activeDescendantCallback(to, from, directlyActivated);\n    }\n    function clearActiveDescendant(previouslyActiveElement = currentFocusedElement) {\n        if (focusInStrategy === 'first') {\n            currentFocusedElement = undefined;\n        }\n        activeDescendantControl === null || activeDescendantControl === void 0 ? void 0 : activeDescendantControl.removeAttribute('aria-activedescendant');\n        container.removeAttribute(hasActiveDescendantAttribute);\n        previouslyActiveElement === null || previouslyActiveElement === void 0 ? void 0 : previouslyActiveElement.removeAttribute(isActiveDescendantAttribute);\n        for (const item of container.querySelectorAll(`[${isActiveDescendantAttribute}]`)) {\n            item === null || item === void 0 ? void 0 : item.removeAttribute(isActiveDescendantAttribute);\n        }\n        activeDescendantCallback === null || activeDescendantCallback === void 0 ? void 0 : activeDescendantCallback(undefined, previouslyActiveElement, false);\n    }\n    function beginFocusManagement(...elements) {\n        const filteredElements = elements.filter(e => { var _a, _b; return (_b = (_a = settings === null || settings === void 0 ? void 0 : settings.focusableElementFilter) === null || _a === void 0 ? void 0 : _a.call(settings, e)) !== null && _b !== void 0 ? _b : true; });\n        if (filteredElements.length === 0) {\n            return;\n        }\n        focusableElements.splice(findInsertionIndex(filteredElements), 0, ...filteredElements);\n        for (const element of filteredElements) {\n            if (!savedTabIndex.has(element)) {\n                savedTabIndex.set(element, element.getAttribute('tabindex'));\n            }\n            element.setAttribute('tabindex', '-1');\n        }\n        if (!currentFocusedElement) {\n            updateFocusedElement(getFirstFocusableElement());\n        }\n    }\n    function findInsertionIndex(elementsToInsert) {\n        const firstElementToInsert = elementsToInsert[0];\n        if (focusableElements.length === 0)\n            return 0;\n        let iMin = 0;\n        let iMax = focusableElements.length - 1;\n        while (iMin <= iMax) {\n            const i = Math.floor((iMin + iMax) / 2);\n            const element = focusableElements[i];\n            if (followsInDocument(firstElementToInsert, element)) {\n                iMax = i - 1;\n            }\n            else {\n                iMin = i + 1;\n            }\n        }\n        return iMin;\n    }\n    function followsInDocument(first, second) {\n        return (second.compareDocumentPosition(first) & Node.DOCUMENT_POSITION_PRECEDING) > 0;\n    }\n    function endFocusManagement(...elements) {\n        for (const element of elements) {\n            const focusableElementIndex = focusableElements.indexOf(element);\n            if (focusableElementIndex >= 0) {\n                focusableElements.splice(focusableElementIndex, 1);\n            }\n            const savedIndex = savedTabIndex.get(element);\n            if (savedIndex !== undefined) {\n                if (savedIndex === null) {\n                    element.removeAttribute('tabindex');\n                }\n                else {\n                    element.setAttribute('tabindex', savedIndex);\n                }\n                savedTabIndex.delete(element);\n            }\n            if (element === currentFocusedElement) {\n                const nextElementToFocus = getFirstFocusableElement();\n                updateFocusedElement(nextElementToFocus);\n            }\n        }\n    }\n    const iterateFocusableElementsOptions = {\n        reverse: settings === null || settings === void 0 ? void 0 : settings.reverse,\n        strict: settings === null || settings === void 0 ? void 0 : settings.strict,\n        onlyTabbable: settings === null || settings === void 0 ? void 0 : settings.onlyTabbable,\n    };\n    beginFocusManagement(...iterateFocusableElements(container, iterateFocusableElementsOptions));\n    const initialElement = typeof focusInStrategy === 'function' ? focusInStrategy(document.body) : getFirstFocusableElement();\n    updateFocusedElement(initialElement);\n    const observer = new MutationObserver(mutations => {\n        for (const mutation of mutations) {\n            for (const removedNode of mutation.removedNodes) {\n                if (removedNode instanceof HTMLElement) {\n                    endFocusManagement(...iterateFocusableElements(removedNode));\n                }\n            }\n            if (mutation.type === 'attributes' && mutation.oldValue === null) {\n                if (mutation.target instanceof HTMLElement) {\n                    endFocusManagement(mutation.target);\n                }\n            }\n        }\n        for (const mutation of mutations) {\n            for (const addedNode of mutation.addedNodes) {\n                if (addedNode instanceof HTMLElement) {\n                    beginFocusManagement(...iterateFocusableElements(addedNode, iterateFocusableElementsOptions));\n                }\n            }\n            if (mutation.type === 'attributes' && mutation.oldValue !== null) {\n                if (mutation.target instanceof HTMLElement) {\n                    beginFocusManagement(mutation.target);\n                }\n            }\n        }\n    });\n    observer.observe(container, {\n        subtree: true,\n        childList: true,\n        attributeFilter: ['hidden', 'disabled'],\n        attributeOldValue: true,\n    });\n    const controller = new AbortController();\n    const signal = (_e = settings === null || settings === void 0 ? void 0 : settings.abortSignal) !== null && _e !== void 0 ? _e : controller.signal;\n    signal.addEventListener('abort', () => {\n        endFocusManagement(...focusableElements);\n    });\n    let elementIndexFocusedByClick = undefined;\n    container.addEventListener('mousedown', event => {\n        if (event.target instanceof HTMLElement && event.target !== document.activeElement) {\n            elementIndexFocusedByClick = focusableElements.indexOf(event.target);\n        }\n    }, { signal });\n    if (activeDescendantControl) {\n        container.addEventListener('focusin', event => {\n            if (event.target instanceof HTMLElement && focusableElements.includes(event.target)) {\n                activeDescendantControl.focus({ preventScroll });\n                updateFocusedElement(event.target);\n            }\n        }, { signal });\n        container.addEventListener('mousemove', ({ target }) => {\n            if (!(target instanceof Node)) {\n                return;\n            }\n            const focusableElement = focusableElements.find(element => element.contains(target));\n            if (focusableElement) {\n                updateFocusedElement(focusableElement);\n            }\n        }, { signal, capture: true });\n        activeDescendantControl.addEventListener('focusin', () => {\n            if (!currentFocusedElement) {\n                updateFocusedElement(getFirstFocusableElement());\n            }\n            else {\n                setActiveDescendant(undefined, currentFocusedElement);\n            }\n        }, { signal });\n        activeDescendantControl.addEventListener('focusout', () => {\n            clearActiveDescendant();\n        }, { signal });\n    }\n    else {\n        container.addEventListener('focusin', event => {\n            if (event.target instanceof HTMLElement) {\n                if (elementIndexFocusedByClick !== undefined) {\n                    if (elementIndexFocusedByClick >= 0) {\n                        if (focusableElements[elementIndexFocusedByClick] !== currentFocusedElement) {\n                            updateFocusedElement(focusableElements[elementIndexFocusedByClick]);\n                        }\n                    }\n                    elementIndexFocusedByClick = undefined;\n                }\n                else {\n                    if (focusInStrategy === 'previous') {\n                        updateFocusedElement(event.target);\n                    }\n                    else if (focusInStrategy === 'closest' || focusInStrategy === 'first') {\n                        if (event.relatedTarget instanceof Element && !container.contains(event.relatedTarget)) {\n                            const targetElementIndex = lastKeyboardFocusDirection === 'previous' ? focusableElements.length - 1 : 0;\n                            const targetElement = focusableElements[targetElementIndex];\n                            targetElement === null || targetElement === void 0 ? void 0 : targetElement.focus({ preventScroll });\n                            return;\n                        }\n                        else {\n                            updateFocusedElement(event.target);\n                        }\n                    }\n                    else if (typeof focusInStrategy === 'function') {\n                        if (event.relatedTarget instanceof Element && !container.contains(event.relatedTarget)) {\n                            const elementToFocus = focusInStrategy(event.relatedTarget);\n                            const requestedFocusElementIndex = elementToFocus ? focusableElements.indexOf(elementToFocus) : -1;\n                            if (requestedFocusElementIndex >= 0 && elementToFocus instanceof HTMLElement) {\n                                elementToFocus.focus({ preventScroll });\n                                return;\n                            }\n                            else {\n                                console.warn('Element requested is not a known focusable element.');\n                            }\n                        }\n                        else {\n                            updateFocusedElement(event.target);\n                        }\n                    }\n                }\n            }\n            lastKeyboardFocusDirection = undefined;\n        }, { signal });\n    }\n    const keyboardEventRecipient = activeDescendantControl !== null && activeDescendantControl !== void 0 ? activeDescendantControl : container;\n    let lastKeyboardFocusDirection = undefined;\n    if (focusInStrategy === 'closest') {\n        document.addEventListener('keydown', event => {\n            if (event.key === 'Tab') {\n                lastKeyboardFocusDirection = getDirection(event);\n            }\n        }, { signal, capture: true });\n    }\n    function getCurrentFocusedIndex() {\n        if (!currentFocusedElement) {\n            return 0;\n        }\n        const focusedIndex = focusableElements.indexOf(currentFocusedElement);\n        const fallbackIndex = currentFocusedElement === container ? -1 : 0;\n        return focusedIndex !== -1 ? focusedIndex : fallbackIndex;\n    }\n    keyboardEventRecipient.addEventListener('keydown', event => {\n        var _a;\n        if (event.key in KEY_TO_DIRECTION) {\n            const keyBit = KEY_TO_BIT[event.key];\n            if (!event.defaultPrevented &&\n                (keyBit & bindKeys) > 0 &&\n                !shouldIgnoreFocusHandling(event, document.activeElement)) {\n                const direction = getDirection(event);\n                let nextElementToFocus = undefined;\n                if (settings === null || settings === void 0 ? void 0 : settings.getNextFocusable) {\n                    nextElementToFocus = settings.getNextFocusable(direction, (_a = document.activeElement) !== null && _a !== void 0 ? _a : undefined, event);\n                }\n                if (!nextElementToFocus) {\n                    const lastFocusedIndex = getCurrentFocusedIndex();\n                    let nextFocusedIndex = lastFocusedIndex;\n                    if (direction === 'previous') {\n                        nextFocusedIndex -= 1;\n                    }\n                    else if (direction === 'start') {\n                        nextFocusedIndex = 0;\n                    }\n                    else if (direction === 'next') {\n                        nextFocusedIndex += 1;\n                    }\n                    else {\n                        nextFocusedIndex = focusableElements.length - 1;\n                    }\n                    if (nextFocusedIndex < 0) {\n                        if (focusOutBehavior === 'wrap' && event.key !== 'Tab') {\n                            nextFocusedIndex = focusableElements.length - 1;\n                        }\n                        else {\n                            nextFocusedIndex = 0;\n                        }\n                    }\n                    if (nextFocusedIndex >= focusableElements.length) {\n                        if (focusOutBehavior === 'wrap' && event.key !== 'Tab') {\n                            nextFocusedIndex = 0;\n                        }\n                        else {\n                            nextFocusedIndex = focusableElements.length - 1;\n                        }\n                    }\n                    if (lastFocusedIndex !== nextFocusedIndex) {\n                        nextElementToFocus = focusableElements[nextFocusedIndex];\n                    }\n                }\n                if (activeDescendantControl) {\n                    updateFocusedElement(nextElementToFocus || currentFocusedElement, true);\n                }\n                else if (nextElementToFocus) {\n                    lastKeyboardFocusDirection = direction;\n                    nextElementToFocus.focus({ preventScroll });\n                }\n                if (event.key !== 'Tab' || nextElementToFocus) {\n                    event.preventDefault();\n                }\n            }\n        }\n    }, { signal });\n    return controller;\n}\n\nexport { FocusKeys, activeDescendantActivatedDirectly, activeDescendantActivatedIndirectly, focusZone, hasActiveDescendantAttribute, isActiveDescendantAttribute };\n","import {TreeViewElement} from './tree_view'\nimport {FocusKeys, focusZone} from '@primer/behaviors'\n\n// This code was adapted from the roving tab index implementation in primer/react, see:\n// https://github.com/primer/react/blob/f9785343716435f43e3d82482b057a17bd345c25/packages/react/src/TreeView/useRovingTabIndex.ts\nexport function useRovingTabIndex(containerEl: TreeViewElement) {\n  // TODO: Initialize focus to the aria-current item if it exists\n  focusZone(containerEl, {\n    bindKeys: FocusKeys.ArrowVertical | FocusKeys.ArrowHorizontal | FocusKeys.HomeAndEnd | FocusKeys.Backspace,\n    getNextFocusable: (_direction, from, event) => {\n      if (!(from instanceof HTMLElement)) return\n\n      // Skip elements within a modal dialog\n      // This need to be in a try/catch to avoid errors in\n      // non-supported browsers\n      try {\n        if (from.closest('dialog:modal')) {\n          return\n        }\n      } catch {\n        // Don't return\n      }\n\n      return getNextFocusableElement(from, event) ?? from\n    },\n    focusInStrategy: () => {\n      let currentItem = containerEl.querySelector('[aria-current]')\n      currentItem = currentItem?.checkVisibility() ? currentItem : null\n\n      const firstItem = containerEl.querySelector('[role=\"treeitem\"]')\n\n      // Focus the aria-current item if it exists\n      if (currentItem instanceof HTMLElement) {\n        return currentItem\n      }\n\n      // Otherwise, focus the activeElement if it's a treeitem\n      if (\n        document.activeElement instanceof HTMLElement &&\n        containerEl.contains(document.activeElement) &&\n        document.activeElement.getAttribute('role') === 'treeitem'\n      ) {\n        return document.activeElement\n      }\n\n      // Otherwise, focus the first treeitem\n      return firstItem instanceof HTMLElement ? firstItem : undefined\n    },\n  })\n}\n\n// DOM utilities used for focus management\n\nfunction getNextFocusableElement(activeElement: HTMLElement, event: KeyboardEvent): HTMLElement | undefined {\n  const elementState = getElementState(activeElement)\n\n  // Reference: https://www.w3.org/WAI/ARIA/apg/patterns/treeview/#keyboard-interaction-24\n  switch (`${elementState} ${event.key}`) {\n    case 'open ArrowRight':\n      // Focus first child node\n      return getFirstChildElement(activeElement)\n\n    case 'open ArrowLeft':\n      // Close node; don't change focus\n      return\n\n    case 'closed ArrowRight':\n      // Open node; don't change focus\n      return\n\n    case 'closed ArrowLeft':\n      // Focus parent element\n      return getParentElement(activeElement)\n\n    case 'end ArrowRight':\n      // Do nothing\n      return\n\n    case 'end ArrowLeft':\n      // Focus parent element\n      return getParentElement(activeElement)\n  }\n\n  // ArrowUp and ArrowDown behavior is the same regardless of element state\n  switch (event.key) {\n    case 'ArrowUp':\n      // Focus previous visible element\n      return getVisibleElement(activeElement, 'previous')\n\n    case 'ArrowDown':\n      // Focus next visible element\n      return getVisibleElement(activeElement, 'next')\n\n    case 'Backspace':\n      return getParentElement(activeElement)\n  }\n}\n\nexport function getElementState(element: HTMLElement): 'open' | 'closed' | 'end' {\n  if (element.getAttribute('role') !== 'treeitem') {\n    throw new Error('Element is not a treeitem')\n  }\n\n  switch (element.getAttribute('aria-expanded')) {\n    case 'true':\n      return 'open'\n    case 'false':\n      return 'closed'\n    default:\n      return 'end'\n  }\n}\n\nfunction getVisibleElement(element: HTMLElement, direction: 'next' | 'previous'): HTMLElement | undefined {\n  const root = element.closest('[role=tree]')\n\n  if (!root) return\n\n  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, node => {\n    if (!(node instanceof HTMLElement)) return NodeFilter.FILTER_SKIP\n    return node.getAttribute('role') === 'treeitem' ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP\n  })\n\n  let current = walker.firstChild()\n\n  while (current !== element) {\n    current = walker.nextNode()\n  }\n\n  let next = direction === 'next' ? walker.nextNode() : walker.previousNode()\n\n  // If next element is nested inside a collapsed subtree, continue iterating\n  while (next instanceof HTMLElement && collapsedParent(next, root)) {\n    next = direction === 'next' ? walker.nextNode() : walker.previousNode()\n  }\n\n  return next instanceof HTMLElement ? next : undefined\n}\n\nfunction collapsedParent(node: Element, root: Element): Element | null {\n  for (const ancestor of root.querySelectorAll('[role=treeitem][aria-expanded=false]')) {\n    if (node === ancestor) continue\n\n    if (ancestor.closest('li')?.contains(node)) {\n      return ancestor\n    }\n  }\n\n  return null\n}\n\nfunction getFirstChildElement(element: HTMLElement): HTMLElement | undefined {\n  const firstChild = element.querySelector('[role=treeitem]')\n  return firstChild instanceof HTMLElement ? firstChild : undefined\n}\n\nfunction getParentElement(element: HTMLElement): HTMLElement | undefined {\n  const group = element.closest('[role=group]')\n  const parent = group?.closest('[role=treeitem]')\n  return parent instanceof HTMLElement ? parent : undefined\n}\n","import {controller, target} from '@github/catalyst'\nimport {TreeViewSubTreeNodeElement} from './tree_view_sub_tree_node_element'\nimport {useRovingTabIndex} from './tree_view_roving_tab_index'\nimport type {TreeViewNodeType, TreeViewCheckedValue, TreeViewNodeInfo} from '../../shared_events'\n\n@controller\nexport class TreeViewElement extends HTMLElement {\n  @target formInputContainer: HTMLElement\n  @target formInputPrototype: HTMLInputElement\n\n  #abortController: AbortController\n\n  connectedCallback() {\n    const {signal} = (this.#abortController = new AbortController())\n    this.addEventListener('click', this, {signal})\n    this.addEventListener('focusin', this, {signal})\n    this.addEventListener('keydown', this, {signal})\n\n    useRovingTabIndex(this)\n\n    // catch-all for any straggler nodes that aren't available when connectedCallback runs\n    new MutationObserver(mutations => {\n      for (const mutation of mutations) {\n        for (const addedNode of mutation.addedNodes) {\n          if (!(addedNode instanceof HTMLElement)) continue\n\n          if (addedNode.querySelector('[aria-expanded=true]')) {\n            this.#autoExpandFrom(addedNode)\n          }\n        }\n      }\n    }).observe(this, {childList: true, subtree: true})\n\n    const updateInputsObserver = new MutationObserver(mutations => {\n      if (!this.formInputContainer) return\n\n      // There is another MutationObserver in TreeViewSubTreeNodeElement that manages checking/unchecking\n      // nodes based on the component's select strategy. These two observers can conflict and cause infinite\n      // looping, so we make sure something actually changed before computing inputs again.\n      const somethingChanged = mutations.some(m => {\n        if (!(m.target instanceof HTMLElement)) return false\n        return m.target.getAttribute('aria-checked') !== m.oldValue\n      })\n\n      if (!somethingChanged) return\n\n      const newInputs = []\n\n      for (const node of this.querySelectorAll('[role=treeitem][aria-checked=true]')) {\n        const newInput = this.formInputPrototype.cloneNode() as HTMLInputElement\n        newInput.removeAttribute('data-target')\n        newInput.removeAttribute('form')\n\n        const payload: {path: string[]; value?: string} = {\n          path: this.getNodePath(node),\n        }\n\n        const inputValue = this.getFormInputValueForNode(node)\n        if (inputValue) payload.value = inputValue\n\n        newInput.value = JSON.stringify(payload)\n        newInputs.push(newInput)\n      }\n\n      this.formInputContainer.replaceChildren(...newInputs)\n    })\n\n    updateInputsObserver.observe(this, {\n      childList: true,\n      subtree: true,\n      attributeFilter: ['aria-checked'],\n    })\n\n    // eslint-disable-next-line github/no-then -- We don't want to wait for this to resolve, just get on with it\n    customElements.whenDefined('tree-view-sub-tree-node').then(() => {\n      // depends on TreeViewSubTreeNodeElement#eachAncestorSubTreeNode, which may not be defined yet\n      this.#autoExpandFrom(this)\n    })\n  }\n\n  #autoExpandFrom(root: HTMLElement) {\n    for (const element of root.querySelectorAll('[aria-expanded=true]')) {\n      this.expandAncestorsForNode(element as HTMLElement)\n    }\n  }\n\n  disconnectedCallback() {\n    this.#abortController.abort()\n  }\n\n  handleEvent(event: Event) {\n    const node = this.#nodeForEvent(event)\n\n    if (node) {\n      this.#handleNodeEvent(node, event)\n    }\n  }\n\n  #eventIsActivation(event: Event): boolean {\n    return event.type === 'click'\n  }\n\n  #nodeForEvent(event: Event): Element | null {\n    const eventTarget = event.target as Element\n    const node = eventTarget.closest('[role=treeitem]')\n    if (!node) return null\n\n    if (eventTarget.closest('.TreeViewItemToggle')) return null\n    if (eventTarget.closest('.TreeViewItemLeadingAction')) return null\n\n    return node\n  }\n\n  #handleNodeEvent(node: Element, event: Event) {\n    if (this.#eventIsCheckboxToggle(event, node)) {\n      this.#handleCheckboxToggle(event, node)\n    } else if (this.#eventIsActivation(event)) {\n      this.#handleNodeActivated(event, node)\n    } else if (event.type === 'focusin') {\n      this.#handleNodeFocused(node)\n    } else if (event instanceof KeyboardEvent) {\n      this.#handleNodeKeyboardEvent(event, node)\n    }\n  }\n\n  #eventIsCheckboxToggle(event: Event, node: Element) {\n    return event.type === 'click' && this.nodeHasCheckBox(node)\n  }\n\n  #handleCheckboxToggle(event: Event, node: Element) {\n    if (this.getNodeDisabledValue(node)) {\n      event.preventDefault()\n      return\n    }\n\n    // only handle checking of leaf nodes, see TreeViewSubTreeNodeElement for the code that\n    // handles checking sub tree items.\n    const type = this.getNodeType(node)\n    if (type !== 'leaf') return\n\n    if (this.getNodeCheckedValue(node) === 'true') {\n      this.setNodeCheckedValue(node, 'false')\n    } else {\n      this.setNodeCheckedValue(node, 'true')\n    }\n  }\n\n  #handleNodeActivated(event: Event, node: Element) {\n    if (this.getNodeDisabledValue(node)) {\n      event.preventDefault()\n      return\n    }\n\n    // do not emit activation events for buttons and anchors, since it is assumed any activation\n    // behavior for these element types is user- or browser-defined\n    if (!(node instanceof HTMLDivElement)) return\n\n    const path = this.getNodePath(node)\n\n    const activationSuccess = this.dispatchEvent(\n      new CustomEvent('treeViewBeforeNodeActivated', {\n        bubbles: true,\n        cancelable: true,\n        detail: this.infoFromNode(node),\n      }),\n    )\n\n    if (!activationSuccess) return\n\n    // navigate or trigger button, don't toggle\n    if (!this.nodeHasNativeAction(node)) {\n      this.toggleAtPath(path)\n    }\n\n    this.dispatchEvent(\n      new CustomEvent('treeViewNodeActivated', {\n        bubbles: true,\n        detail: this.infoFromNode(node),\n      }),\n    )\n  }\n\n  #handleNodeFocused(node: Element) {\n    const previousNode = this.querySelector('[aria-selected=true]')\n    previousNode?.setAttribute('aria-selected', 'false')\n    node.setAttribute('aria-selected', 'true')\n  }\n\n  #handleNodeKeyboardEvent(event: KeyboardEvent, node: Element) {\n    if (!node || this.getNodeType(node) !== 'leaf') {\n      return\n    }\n\n    switch (event.key) {\n      case ' ':\n      case 'Enter':\n        if (this.getNodeDisabledValue(node)) {\n          event.preventDefault()\n          break\n        }\n\n        if (this.nodeHasCheckBox(node)) {\n          event.preventDefault()\n\n          if (this.getNodeCheckedValue(node) === 'true') {\n            this.setNodeCheckedValue(node, 'false')\n          } else {\n            this.setNodeCheckedValue(node, 'true')\n          }\n        } else if (node instanceof HTMLAnchorElement) {\n          // simulate click on space\n          node.click()\n        }\n\n        break\n    }\n  }\n\n  getFormInputValueForNode(node: Element): string | null {\n    return node.getAttribute('data-value')\n  }\n\n  getNodePath(node: Element): string[] {\n    const rawPath = node.getAttribute('data-path')\n\n    if (rawPath) {\n      return JSON.parse(rawPath)\n    }\n\n    return []\n  }\n\n  getNodeType(node: Element): TreeViewNodeType | null {\n    return node.getAttribute('data-node-type') as TreeViewNodeType | null\n  }\n\n  markCurrentAtPath(path: string[]) {\n    const pathStr = JSON.stringify(path)\n    const nodeToMark = this.querySelector(`[data-path=\"${CSS.escape(pathStr)}\"`)\n    if (!nodeToMark) return\n\n    this.currentNode?.setAttribute('aria-current', 'false')\n    nodeToMark.setAttribute('aria-current', 'true')\n  }\n\n  get currentNode(): HTMLLIElement | null {\n    return this.querySelector('[aria-current=true]')\n  }\n\n  expandAtPath(path: string[]) {\n    const node = this.subTreeAtPath(path)\n    if (!node) return\n\n    node.expand()\n  }\n\n  collapseAtPath(path: string[]) {\n    const node = this.subTreeAtPath(path)\n    if (!node) return\n\n    node.collapse()\n  }\n\n  toggleAtPath(path: string[]) {\n    const node = this.subTreeAtPath(path)\n    if (!node) return\n\n    node.toggle()\n  }\n\n  checkAtPath(path: string[]) {\n    const node = this.nodeAtPath(path)\n    if (!node) return\n\n    this.setNodeCheckedValue(node, 'true')\n  }\n\n  uncheckAtPath(path: string[]) {\n    const node = this.nodeAtPath(path)\n    if (!node) return\n\n    this.setNodeCheckedValue(node, 'false')\n  }\n\n  toggleCheckedAtPath(path: string[]) {\n    const node = this.nodeAtPath(path)\n    if (!node) return\n\n    if (this.getNodeType(node) === 'leaf') {\n      if (this.getNodeCheckedValue(node) === 'true') {\n        this.uncheckAtPath(path)\n      } else {\n        this.checkAtPath(path)\n      }\n    }\n  }\n\n  checkedValueAtPath(path: string[]): TreeViewCheckedValue {\n    const node = this.nodeAtPath(path)\n    if (!node) return 'false'\n\n    return this.getNodeCheckedValue(node)\n  }\n\n  disabledValueAtPath(path: string[]): boolean {\n    const node = this.nodeAtPath(path)\n    if (!node) return false\n\n    return this.getNodeDisabledValue(node)\n  }\n\n  nodeAtPath(path: string[], selector?: string): Element | null {\n    const pathStr = JSON.stringify(path)\n    return this.querySelector(`${selector || ''}[data-path=\"${CSS.escape(pathStr)}\"]`)\n  }\n\n  subTreeAtPath(path: string[]): TreeViewSubTreeNodeElement | null {\n    const node = this.nodeAtPath(path, '[data-node-type=sub-tree]')\n    if (!node) return null\n\n    return node.closest('tree-view-sub-tree-node') as TreeViewSubTreeNodeElement | null\n  }\n\n  leafAtPath(path: string[]): HTMLLIElement | null {\n    return this.nodeAtPath(path, '[data-node-type=leaf]') as HTMLLIElement | null\n  }\n\n  setNodeCheckedValue(node: Element, value: TreeViewCheckedValue) {\n    node.setAttribute('aria-checked', value.toString())\n  }\n\n  getNodeCheckedValue(node: Element): TreeViewCheckedValue {\n    return (node.getAttribute('aria-checked') || 'false') as TreeViewCheckedValue\n  }\n\n  getNodeDisabledValue(node: Element): boolean {\n    return node.getAttribute('aria-disabled') === 'true'\n  }\n\n  setNodeDisabledValue(node: Element, disabled: boolean) {\n    if (disabled) {\n      node.setAttribute('aria-disabled', 'true')\n    } else {\n      node.removeAttribute('aria-disabled')\n    }\n  }\n\n  nodeHasCheckBox(node: Element): boolean {\n    return node.querySelector('.TreeViewItemCheckbox') !== null\n  }\n\n  nodeHasNativeAction(node: Element): boolean {\n    return node instanceof HTMLAnchorElement || node instanceof HTMLButtonElement\n  }\n\n  expandAncestorsForNode(node: HTMLElement) {\n    const subTreeNode = node.closest('tree-view-sub-tree-node') as TreeViewSubTreeNodeElement\n    if (!subTreeNode) return\n\n    for (const ancestor of subTreeNode.eachAncestorSubTreeNode()) {\n      if (!ancestor.expanded) {\n        ancestor.expand()\n      }\n    }\n  }\n\n  // PRIVATE API METHOD\n  //\n  // This would normally be marked private, but it's called by TreeViewSubTreeNodes\n  // and thus must be public.\n  infoFromNode(node: Element, newCheckedValue?: TreeViewCheckedValue): TreeViewNodeInfo | null {\n    const type = this.getNodeType(node)\n    if (!type) return null\n\n    const checkedValue = this.getNodeCheckedValue(node)\n\n    return {\n      node,\n      type,\n      path: this.getNodePath(node),\n      checkedValue: newCheckedValue || checkedValue,\n      previousCheckedValue: checkedValue,\n    }\n  }\n}\n","// Waits for condition to return true. If it returns false initially, this function creates a\n// MutationObserver that calls body() whenever the contents of the component change.\nexport const observeMutationsUntilConditionMet = (element: Element, condition: () => boolean, body: () => void) => {\n  if (condition()) {\n    body()\n  } else {\n    const mutationObserver = new MutationObserver(() => {\n      if (condition()) {\n        body()\n        mutationObserver.disconnect()\n      }\n    })\n\n    mutationObserver.observe(element, {childList: true, subtree: true})\n  }\n}\n","import {controller, target} from '@github/catalyst'\nimport {observeMutationsUntilConditionMet} from '../../utils'\n\n@controller\nexport class TreeViewIconPairElement extends HTMLElement {\n  @target expandedIcon: HTMLElement\n  @target collapsedIcon: HTMLElement\n\n  expanded: boolean\n\n  connectedCallback() {\n    observeMutationsUntilConditionMet(\n      this,\n      () => Boolean(this.collapsedIcon) && Boolean(this.expandedIcon),\n      () => {\n        this.expanded = this.collapsedIcon.hidden\n      },\n    )\n  }\n\n  showExpanded() {\n    this.expanded = true\n    this.#update()\n  }\n\n  showCollapsed() {\n    this.expanded = false\n    this.#update()\n  }\n\n  toggle() {\n    this.expanded = !this.expanded\n    this.#update()\n  }\n\n  #update() {\n    if (this.expanded) {\n      this.expandedIcon.hidden = false\n      this.collapsedIcon.hidden = true\n    } else {\n      this.expandedIcon.hidden = true\n      this.collapsedIcon.hidden = false\n    }\n  }\n}\n","import {controller, target} from '@github/catalyst'\nimport {TreeViewIconPairElement} from './tree_view_icon_pair_element'\nimport {observeMutationsUntilConditionMet} from '../../utils'\nimport {TreeViewIncludeFragmentElement} from './tree_view_include_fragment_element'\nimport {TreeViewElement} from './tree_view'\nimport type {TreeViewNodeInfo} from '../../shared_events'\n\ntype LoadingState = 'loading' | 'error' | 'success'\n\nexport type SelectStrategy = 'self' | 'descendants' | 'mixed_descendants'\n\n@controller\nexport class TreeViewSubTreeNodeElement extends HTMLElement {\n  @target node: HTMLElement\n  @target subTree: HTMLElement\n  @target iconPair: TreeViewIconPairElement\n  @target toggleButton: HTMLElement\n  @target expandedToggleIcon: HTMLElement\n  @target collapsedToggleIcon: HTMLElement\n  @target includeFragment: TreeViewIncludeFragmentElement\n  @target loadingIndicator: HTMLElement\n  @target loadingFailureMessage: HTMLElement\n  @target retryButton: HTMLButtonElement\n\n  #expanded: boolean | null = null\n  #loadingState: LoadingState = 'success'\n  #abortController: AbortController\n  #activeElementIsLoader: boolean = false\n\n  connectedCallback() {\n    observeMutationsUntilConditionMet(\n      this,\n      () => Boolean(this.node) && Boolean(this.subTree),\n      () => {\n        this.#update()\n      },\n    )\n\n    const {signal} = (this.#abortController = new AbortController())\n    this.addEventListener('click', this, {signal})\n    this.addEventListener('keydown', this, {signal})\n\n    observeMutationsUntilConditionMet(\n      this,\n      () => Boolean(this.includeFragment),\n      () => {\n        this.includeFragment.addEventListener('loadstart', this, {signal})\n        this.includeFragment.addEventListener('error', this, {signal})\n        this.includeFragment.addEventListener('include-fragment-replace', this, {signal})\n        this.includeFragment.addEventListener(\n          'include-fragment-replaced',\n          (e: Event) => {\n            this.#handleIncludeFragmentEvent(e)\n          },\n          {signal},\n        )\n      },\n    )\n\n    observeMutationsUntilConditionMet(\n      this,\n      () => Boolean(this.retryButton),\n      () => {\n        this.retryButton.addEventListener(\n          'click',\n          event => {\n            this.#handleRetryButtonEvent(event)\n          },\n          {signal},\n        )\n      },\n    )\n\n    const checkedMutationObserver = new MutationObserver(() => {\n      if (this.selectStrategy !== 'mixed_descendants') return\n\n      let checkType = 'unknown'\n\n      for (const node of this.eachDirectDescendantNode()) {\n        switch (`${checkType} ${node.getAttribute('aria-checked') || 'false'}`) {\n          case 'unknown mixed':\n          case 'false mixed':\n          case 'true mixed':\n          case 'false true':\n          case 'true false':\n            checkType = 'mixed'\n            break\n\n          case 'unknown false':\n            checkType = 'false'\n            break\n\n          case 'unknown true':\n            checkType = 'true'\n        }\n      }\n\n      if (checkType !== 'unknown' && this.node?.getAttribute('aria-checked') !== checkType) {\n        this.node?.setAttribute('aria-checked', checkType)\n      }\n    })\n\n    checkedMutationObserver.observe(this, {\n      childList: true,\n      subtree: true,\n      attributeFilter: ['aria-checked'],\n    })\n  }\n\n  get expanded(): boolean {\n    if (this.#expanded === null) {\n      this.#expanded = this.node.getAttribute('aria-expanded') === 'true'\n    }\n\n    return this.#expanded\n  }\n\n  set expanded(newValue: boolean) {\n    this.#expanded = newValue\n    this.#update()\n  }\n\n  get loadingState(): LoadingState {\n    return this.#loadingState\n  }\n\n  set loadingState(newState: LoadingState) {\n    this.#loadingState = newState\n    this.#update()\n  }\n\n  get selectStrategy(): SelectStrategy {\n    return (this.node.getAttribute('data-select-strategy') || 'descendants') as SelectStrategy\n  }\n\n  disconnectedCallback() {\n    this.#abortController.abort()\n  }\n\n  handleEvent(event: Event) {\n    if (event.target === this.toggleButton) {\n      this.#handleToggleEvent(event)\n    } else if (event.target === this.includeFragment) {\n      this.#handleIncludeFragmentEvent(event)\n    } else if (event instanceof KeyboardEvent) {\n      this.#handleKeyboardEvent(event)\n    } else if (\n      (event.target as Element).closest('[role=treeitem]') === this.node &&\n      event.type === 'click' &&\n      this.#checkboxElement\n    ) {\n      this.#handleCheckboxEvent(event)\n    }\n  }\n\n  expand() {\n    const alreadyExpanded = this.expanded\n\n    this.expanded = true\n\n    if (!alreadyExpanded && this.treeView) {\n      this.treeView.dispatchEvent(\n        new CustomEvent('treeViewNodeExpanded', {\n          bubbles: true,\n          detail: this.treeView?.infoFromNode(this.node),\n        }),\n      )\n    }\n  }\n\n  collapse() {\n    const alreadyCollapsed = !this.expanded\n\n    this.expanded = false\n\n    if (!alreadyCollapsed && this.treeView) {\n      // Prevent issue where currently focusable node is stuck inside a collapsed\n      // sub-tree and no node in the entire tree can be focused\n      const previousNode = this.subTree.querySelector(\"[tabindex='0']\")\n      previousNode?.setAttribute('tabindex', '-1')\n      this.node.setAttribute('tabindex', '0')\n\n      this.treeView.dispatchEvent(\n        new CustomEvent('treeViewNodeCollapsed', {\n          bubbles: true,\n          detail: this.treeView?.infoFromNode(this.node),\n        }),\n      )\n    }\n  }\n\n  toggle() {\n    if (this.expanded) {\n      this.collapse()\n    } else {\n      this.expand()\n    }\n  }\n\n  get nodes(): NodeListOf<Element> {\n    return this.querySelectorAll(':scope > [role=treeitem]')\n  }\n\n  *eachDirectDescendantNode(): Generator<Element> {\n    for (const leaf of this.subTree.querySelectorAll(':scope > li > .TreeViewItemContainer > [role=treeitem]')) {\n      yield leaf\n    }\n\n    for (const subTree of this.subTree.querySelectorAll(\n      ':scope > tree-view-sub-tree-node > li > .TreeViewItemContainer > [role=treeitem]',\n    )) {\n      yield subTree\n    }\n  }\n\n  *eachDescendantNode(): Generator<Element> {\n    for (const node of this.subTree.querySelectorAll('[role=treeitem]')) {\n      yield node\n    }\n  }\n\n  *eachAncestorSubTreeNode(): Generator<TreeViewSubTreeNodeElement> {\n    if (!this.treeView) return\n\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let current: TreeViewSubTreeNodeElement | null = this\n\n    while (current && this.treeView.contains(current)) {\n      yield current\n\n      current = current.parentElement?.closest('tree-view-sub-tree-node') as TreeViewSubTreeNodeElement | null\n    }\n  }\n\n  get isEmpty(): boolean {\n    return this.nodes.length === 0\n  }\n\n  get treeView(): TreeViewElement | null {\n    return this.closest('tree-view')\n  }\n\n  #handleToggleEvent(event: Event) {\n    if (event.type === 'click') {\n      this.toggle()\n      // eslint-disable-next-line no-restricted-syntax\n      event.stopPropagation()\n    }\n  }\n\n  #handleIncludeFragmentEvent(event: Event) {\n    switch (event.type) {\n      // the request has started\n      case 'loadstart':\n        this.loadingState = 'loading'\n        break\n\n      // the request failed\n      case 'error':\n        this.loadingState = 'error'\n        break\n\n      // request succeeded but element has not yet been replaced\n      case 'include-fragment-replace':\n        this.#activeElementIsLoader = document.activeElement === this.loadingIndicator.closest('[role=treeitem]')\n        this.loadingState = 'success'\n        break\n\n      case 'include-fragment-replaced':\n        // Make sure to expand the new sub-tree, otherwise it looks like nothing happened. This prevents\n        // having to remember to pass `SubTree.new(expanded: true)` in the controller.\n        this.expanded = true\n\n        if (this.#activeElementIsLoader) {\n          const firstItem = this.querySelector('[role=group] > :first-child') as HTMLElement | null\n          if (!firstItem) return\n\n          const content = firstItem.querySelector('[role=treeitem]') as HTMLElement | null\n          if (!content) return\n\n          content.focus()\n        }\n\n        this.#activeElementIsLoader = false\n        break\n    }\n  }\n\n  #handleRetryButtonEvent(event: Event) {\n    if (event.type === 'click') {\n      this.loadingState = 'loading'\n      this.includeFragment.refetch()\n    }\n  }\n\n  #handleKeyboardEvent(event: KeyboardEvent) {\n    const node = (event.target as HTMLElement).closest('[role=treeitem]')\n    if (!node || this.treeView?.getNodeType(node) !== 'sub-tree') {\n      return\n    }\n\n    switch (event.key) {\n      case 'Enter':\n        if (this.treeView?.getNodeDisabledValue(node)) {\n          event.preventDefault()\n          break\n        }\n\n        // eslint-disable-next-line no-restricted-syntax\n        event.stopPropagation()\n\n        if (this.#checkboxElement) {\n          this.toggleChecked()\n        } else if (!this.treeView?.nodeHasNativeAction(node)) {\n          // toggle only if this node isn't eg. an anchor or button\n          this.toggle()\n        }\n\n        break\n\n      case 'ArrowRight':\n        // eslint-disable-next-line no-restricted-syntax\n        event.stopPropagation()\n        this.expand()\n        break\n\n      case 'ArrowLeft':\n        // eslint-disable-next-line no-restricted-syntax\n        event.stopPropagation()\n        this.collapse()\n        break\n\n      case ' ':\n        if (this.treeView?.getNodeDisabledValue(node)) {\n          event.preventDefault()\n          break\n        }\n\n        if (this.#checkboxElement) {\n          // eslint-disable-next-line no-restricted-syntax\n          event.stopPropagation()\n          event.preventDefault()\n\n          this.toggleChecked()\n        } else {\n          if (node instanceof HTMLAnchorElement) {\n            // simulate click on space for anchors (buttons already handle this natively)\n            node.click()\n          } else if (!this.treeView?.nodeHasNativeAction(node)) {\n            this.toggle()\n          }\n        }\n\n        break\n    }\n  }\n\n  #handleCheckboxEvent(event: Event) {\n    if (this.treeView?.getNodeDisabledValue(this.node)) {\n      event.preventDefault()\n      return\n    }\n\n    if (event.type !== 'click') return\n\n    this.toggleChecked()\n\n    // prevent receiving this event twice\n    // eslint-disable-next-line no-restricted-syntax\n    event.stopPropagation()\n  }\n\n  toggleChecked() {\n    const checkValue = this.treeView?.getNodeCheckedValue(this.node) || 'false'\n    const newCheckValue = checkValue === 'false' ? 'true' : 'false'\n    const nodeInfos: TreeViewNodeInfo[] = []\n    const rootInfo = this.treeView?.infoFromNode(this.node, newCheckValue)\n    if (rootInfo) nodeInfos.push(rootInfo)\n\n    if (this.selectStrategy === 'descendants' || this.selectStrategy === 'mixed_descendants') {\n      for (const node of this.eachDescendantNode()) {\n        const info = this.treeView?.infoFromNode(node, newCheckValue)\n        if (info) nodeInfos.push(info)\n      }\n    }\n\n    const checkSuccess = this.dispatchEvent(\n      new CustomEvent('treeViewBeforeNodeChecked', {\n        bubbles: true,\n        cancelable: true,\n        detail: nodeInfos,\n      }),\n    )\n\n    if (!checkSuccess) return\n\n    for (const nodeInfo of nodeInfos) {\n      nodeInfo.node.setAttribute('aria-checked', newCheckValue)\n    }\n\n    this.dispatchEvent(\n      new CustomEvent('treeViewNodeChecked', {\n        bubbles: true,\n        cancelable: true,\n        detail: nodeInfos,\n      }),\n    )\n  }\n\n  #update() {\n    if (this.expanded) {\n      if (this.subTree) this.subTree.hidden = false\n      this.node.setAttribute('aria-expanded', 'true')\n      this.treeView?.expandAncestorsForNode(this)\n\n      if (this.iconPair) {\n        this.iconPair.showExpanded()\n      }\n\n      if (this.expandedToggleIcon && this.collapsedToggleIcon) {\n        this.expandedToggleIcon.removeAttribute('hidden')\n        this.collapsedToggleIcon.setAttribute('hidden', 'hidden')\n      }\n    } else {\n      if (this.subTree) this.subTree.hidden = true\n      this.node.setAttribute('aria-expanded', 'false')\n\n      if (this.iconPair) {\n        this.iconPair.showCollapsed()\n      }\n\n      if (this.expandedToggleIcon && this.collapsedToggleIcon) {\n        this.expandedToggleIcon.setAttribute('hidden', 'hidden')\n        this.collapsedToggleIcon.removeAttribute('hidden')\n      }\n    }\n\n    switch (this.loadingState) {\n      case 'loading':\n        if (this.loadingFailureMessage) this.loadingFailureMessage.hidden = true\n        if (this.loadingIndicator) this.loadingIndicator.hidden = false\n        break\n\n      case 'error':\n        if (this.loadingIndicator) this.loadingIndicator.hidden = true\n        if (this.loadingFailureMessage) this.loadingFailureMessage.hidden = false\n        break\n\n      // success/init case\n      default:\n        if (this.loadingIndicator) this.loadingIndicator.hidden = true\n        if (this.loadingFailureMessage) this.loadingFailureMessage.hidden = true\n    }\n  }\n\n  get #checkboxElement(): HTMLElement | null {\n    return this.querySelector('.TreeViewItemCheckbox')\n  }\n}\n","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _IncludeFragmentElement_instances, _IncludeFragmentElement_busy, _IncludeFragmentElement_observer, _IncludeFragmentElement_handleData, _IncludeFragmentElement_getData, _IncludeFragmentElement_getStringOrErrorData, _IncludeFragmentElement_task, _IncludeFragmentElement_fetchDataWithEvents;\nconst privateData = new WeakMap();\nfunction isWildcard(accept) {\n    return accept && !!accept.split(',').find(x => x.match(/^\\s*\\*\\/\\*/));\n}\nlet cspTrustedTypesPolicyPromise = null;\nexport class IncludeFragmentElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        _IncludeFragmentElement_instances.add(this);\n        _IncludeFragmentElement_busy.set(this, false);\n        _IncludeFragmentElement_observer.set(this, new IntersectionObserver(entries => {\n            for (const entry of entries) {\n                if (entry.isIntersecting) {\n                    const { target } = entry;\n                    __classPrivateFieldGet(this, _IncludeFragmentElement_observer, \"f\").unobserve(target);\n                    if (!(target instanceof IncludeFragmentElement))\n                        return;\n                    if (target.loading === 'lazy') {\n                        __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_handleData).call(this);\n                    }\n                }\n            }\n        }, {\n            rootMargin: '0px 0px 256px 0px',\n            threshold: 0.01,\n        }));\n    }\n    static define(tag = 'include-fragment', registry = customElements) {\n        registry.define(tag, this);\n        return this;\n    }\n    static setCSPTrustedTypesPolicy(policy) {\n        cspTrustedTypesPolicyPromise = policy === null ? policy : Promise.resolve(policy);\n    }\n    static get observedAttributes() {\n        return ['src', 'loading'];\n    }\n    get src() {\n        const src = this.getAttribute('src');\n        if (src) {\n            const link = this.ownerDocument.createElement('a');\n            link.href = src;\n            return link.href;\n        }\n        else {\n            return '';\n        }\n    }\n    set src(val) {\n        this.setAttribute('src', val);\n    }\n    get loading() {\n        if (this.getAttribute('loading') === 'lazy')\n            return 'lazy';\n        return 'eager';\n    }\n    set loading(value) {\n        this.setAttribute('loading', value);\n    }\n    get accept() {\n        return this.getAttribute('accept') || '';\n    }\n    set accept(val) {\n        this.setAttribute('accept', val);\n    }\n    get data() {\n        return __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_getStringOrErrorData).call(this);\n    }\n    attributeChangedCallback(attribute, oldVal) {\n        if (attribute === 'src') {\n            if (this.isConnected && this.loading === 'eager') {\n                __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_handleData).call(this);\n            }\n        }\n        else if (attribute === 'loading') {\n            if (this.isConnected && oldVal !== 'eager' && this.loading === 'eager') {\n                __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_handleData).call(this);\n            }\n        }\n    }\n    connectedCallback() {\n        if (!this.shadowRoot) {\n            this.attachShadow({ mode: 'open' });\n            const style = document.createElement('style');\n            style.textContent = `:host {display: block;}`;\n            this.shadowRoot.append(style, document.createElement('slot'));\n        }\n        if (this.src && this.loading === 'eager') {\n            __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_handleData).call(this);\n        }\n        if (this.loading === 'lazy') {\n            __classPrivateFieldGet(this, _IncludeFragmentElement_observer, \"f\").observe(this);\n        }\n    }\n    request() {\n        const src = this.src;\n        if (!src) {\n            throw new Error('missing src');\n        }\n        return new Request(src, {\n            method: 'GET',\n            credentials: 'same-origin',\n            headers: {\n                Accept: this.accept || 'text/html',\n            },\n        });\n    }\n    load() {\n        return __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_getStringOrErrorData).call(this);\n    }\n    fetch(request) {\n        return fetch(request);\n    }\n    refetch() {\n        privateData.delete(this);\n        __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_handleData).call(this);\n    }\n}\n_IncludeFragmentElement_busy = new WeakMap(), _IncludeFragmentElement_observer = new WeakMap(), _IncludeFragmentElement_instances = new WeakSet(), _IncludeFragmentElement_handleData = async function _IncludeFragmentElement_handleData() {\n    if (__classPrivateFieldGet(this, _IncludeFragmentElement_busy, \"f\"))\n        return;\n    __classPrivateFieldSet(this, _IncludeFragmentElement_busy, true, \"f\");\n    __classPrivateFieldGet(this, _IncludeFragmentElement_observer, \"f\").unobserve(this);\n    try {\n        const data = await __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_getData).call(this);\n        if (data instanceof Error) {\n            throw data;\n        }\n        const dataTreatedAsString = data;\n        const template = document.createElement('template');\n        template.innerHTML = dataTreatedAsString;\n        const fragment = document.importNode(template.content, true);\n        const canceled = !this.dispatchEvent(new CustomEvent('include-fragment-replace', {\n            cancelable: true,\n            detail: { fragment },\n        }));\n        if (canceled) {\n            __classPrivateFieldSet(this, _IncludeFragmentElement_busy, false, \"f\");\n            return;\n        }\n        this.replaceWith(fragment);\n        this.dispatchEvent(new CustomEvent('include-fragment-replaced'));\n    }\n    catch (_a) {\n        this.classList.add('is-error');\n    }\n    finally {\n        __classPrivateFieldSet(this, _IncludeFragmentElement_busy, false, \"f\");\n    }\n}, _IncludeFragmentElement_getData = async function _IncludeFragmentElement_getData() {\n    const src = this.src;\n    const cachedData = privateData.get(this);\n    if (cachedData && cachedData.src === src) {\n        return cachedData.data;\n    }\n    else {\n        let data;\n        if (src) {\n            data = __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_fetchDataWithEvents).call(this);\n        }\n        else {\n            data = Promise.reject(new Error('missing src'));\n        }\n        privateData.set(this, { src, data });\n        return data;\n    }\n}, _IncludeFragmentElement_getStringOrErrorData = async function _IncludeFragmentElement_getStringOrErrorData() {\n    const data = await __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_getData).call(this);\n    if (data instanceof Error) {\n        throw data;\n    }\n    return data.toString();\n}, _IncludeFragmentElement_task = async function _IncludeFragmentElement_task(eventsToDispatch) {\n    await new Promise(resolve => setTimeout(resolve, 0));\n    for (const eventType of eventsToDispatch) {\n        this.dispatchEvent(new Event(eventType));\n    }\n}, _IncludeFragmentElement_fetchDataWithEvents = async function _IncludeFragmentElement_fetchDataWithEvents() {\n    try {\n        await __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_task).call(this, ['loadstart']);\n        const response = await this.fetch(this.request());\n        if (response.status !== 200) {\n            throw new Error(`Failed to load resource: the server responded with a status of ${response.status}`);\n        }\n        const ct = response.headers.get('Content-Type');\n        if (!isWildcard(this.accept) && (!ct || !ct.includes(this.accept ? this.accept : 'text/html'))) {\n            throw new Error(`Failed to load resource: expected ${this.accept || 'text/html'} but was ${ct}`);\n        }\n        const responseText = await response.text();\n        let data = responseText;\n        if (cspTrustedTypesPolicyPromise) {\n            const cspTrustedTypesPolicy = await cspTrustedTypesPolicyPromise;\n            data = cspTrustedTypesPolicy.createHTML(responseText, response);\n        }\n        __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_task).call(this, ['load', 'loadend']);\n        return data;\n    }\n    catch (error) {\n        __classPrivateFieldGet(this, _IncludeFragmentElement_instances, \"m\", _IncludeFragmentElement_task).call(this, ['error', 'loadend']);\n        throw error;\n    }\n};\n","import { IncludeFragmentElement } from './include-fragment-element.js';\nconst root = (typeof globalThis !== 'undefined' ? globalThis : window);\ntry {\n    root.IncludeFragmentElement = IncludeFragmentElement.define();\n}\ncatch (e) {\n    if (!(root.DOMException && e instanceof DOMException && e.name === 'NotSupportedError') &&\n        !(e instanceof ReferenceError)) {\n        throw e;\n    }\n}\nexport default IncludeFragmentElement;\nexport * from './include-fragment-element.js';\n","import {controller} from '@github/catalyst'\nimport {IncludeFragmentElement} from '@github/include-fragment-element'\n\n@controller\nexport class TreeViewIncludeFragmentElement extends IncludeFragmentElement {\n  request(): Request {\n    const originalRequest = super.request()\n    const url = new URL(originalRequest.url)\n    url.searchParams.set('path', this.getAttribute('data-path') || '')\n\n    return new Request(url, {\n      method: originalRequest.method,\n      headers: originalRequest.headers,\n      credentials: originalRequest.credentials,\n    })\n  }\n}\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__classPrivateFieldGet","receiver","state","kind","f","TypeError","has","call","value","get","__classPrivateFieldSet","set","SuppressedError","controllers","WeakSet","bindShadow","root","bindElements","listenForBind","observers","WeakMap","el","document","closed","observer","MutationObserver","mutations","mutation","type","Element","bindActions","addedNodes","node","observe","childList","subtree","attributeFilter","subscription","unsubscribe","delete","disconnect","querySelectorAll","hasAttribute","handleEvent","event","currentTarget","binding","bindings","controller","closest","tag","method","getRootNode","ShadowRoot","host","matches","shadowController","action","getAttribute","trim","split","eventSep","lastIndexOf","methodSep","Math","max","slice","addEventListener","dasherize","str","String","description","replace","toLowerCase","mustDasherize","dashed","includes","DOMException","attrKey","initialized","initializeAttrs","instance","names","add","proto","getPrototypeOf","prefix","constructor","attrPrefix","meta","name","descriptor","configurable","this","newValue","setAttribute","Number","toggleAttribute","dynamicElements","Map","ready","Promise","resolve","readyState","once","firstInteraction","AbortController","signal","listenerOptions","passive","handler","abort","strategies","visible","tagName","IntersectionObserver","entries","entry","isIntersecting","rootMargin","threshold","timers","scan","element","cancelAnimationFrame","requestAnimationFrame","keys","child","querySelector","customElements","strategyName","strategy","cb","then","elementLoader","symbol","Symbol","for","CatalystDelegate","classObject","delegate","connectedCallback","prototype","disconnectedCallback","attributeChangedCallback","oldValue","observedAttributes","attributes","observed","attrToAttributeName","map","concat","defineObservedAttributes","window","define","e","register","upgrade","template","parentElement","attachShadow","mode","append","content","cloneNode","autoShadowRoot","shadowRoot","ownerDocument","bind","size","hasOwnProperty","parent","Set","findTarget","ToggleSwitchElement","HTMLElement","turbo","toggling","src","link","createElement","href","csrf","csrfElement","HTMLInputElement","csrfField","isRemote","async","isDisabled","performToggle","setLoadingState","submitForm","error","Error","setErrorState","message","setSuccessState","turnOn","switch","classList","turnOff","remove","isOn","isOff","disable","enable","removeAttribute","errorIcon","loadingSpinner","CustomEvent","bubbles","dispatchEvent","setFinishedState","detail","body","FormData","response","requestHeaders","fetch","credentials","headers","ok","text","contentType","Turbo","startsWith","renderStreamMessage","iterateFocusableElements","container","options","_a","_b","strict","acceptFn","onlyTabbable","isTabbable","isFocusable","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","acceptNode","FILTER_ACCEPT","FILTER_SKIP","nextNode","reverse","lastChild","firstChild","previousNode","elem","disabledAttrInert","disabled","hiddenInert","hidden","hiddenInputInert","sentinelInert","contains","style","getComputedStyle","sizeInert","offsetWidth","offsetHeight","visibilityInert","visibility","displayInert","display","offsetParent","clientRectsInert","getClientRects","HTMLAnchorElement","tabIndex","isMac","signalSupported","noop","create","removeEventListener","isMacOS","undefined","test","navigator","platform","idSeed","FocusKeys","originalAddEventListener","EventTarget","originalCallback","optionsOrCapture","AbortSignal","monkeyPatch","KEY_TO_BIT","ArrowLeft","ArrowHorizontal","ArrowDown","ArrowVertical","ArrowUp","ArrowRight","h","HL","j","JK","k","l","a","AD","s","WS","w","Tab","Home","HomeAndEnd","End","PageUp","PageUpDown","PageDown","Backspace","KEY_TO_DIRECTION","getDirection","keyboardEvent","direction","shiftKey","metaKey","ctrlKey","isActiveDescendantAttribute","activeDescendantActivatedDirectly","activeDescendantActivatedIndirectly","hasActiveDescendantAttribute","focusZone","settings","_c","_d","_e","focusableElements","savedTabIndex","bindKeys","getNextFocusable","ArrowAll","focusOutBehavior","focusInStrategy","activeDescendantControl","activeDescendantCallback","onActiveDescendantChanged","currentFocusedElement","preventScroll","getFirstFocusableElement","updateFocusedElement","to","directlyActivated","from","activeElement","setActiveDescendant","clearActiveDescendant","id","previouslyActiveElement","item","beginFocusManagement","elements","filteredElements","filter","focusableElementFilter","splice","elementsToInsert","firstElementToInsert","iMin","iMax","floor","followsInDocument","findInsertionIndex","first","second","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","endFocusManagement","focusableElementIndex","indexOf","savedIndex","iterateFocusableElementsOptions","removedNode","removedNodes","addedNode","attributeOldValue","abortSignal","elementIndexFocusedByClick","focus","focusableElement","find","capture","relatedTarget","targetElementIndex","lastKeyboardFocusDirection","targetElement","elementToFocus","console","warn","keyboardEventRecipient","keyBit","defaultPrevented","keyLength","isTextInput","HTMLTextAreaElement","HTMLSelectElement","altKey","textInput","cursorAtStart","selectionStart","selectionEnd","cursorAtEnd","shouldIgnoreFocusHandling","nextElementToFocus","lastFocusedIndex","focusedIndex","getCurrentFocusedIndex","nextFocusedIndex","preventDefault","useRovingTabIndex","containerEl","_direction","getElementState","getFirstChildElement","getParentElement","getVisibleElement","getNextFocusableElement","currentItem","checkVisibility","firstItem","current","next","collapsedParent","ancestor","group","TreeViewElement","_TreeViewElement_abortController","_TreeViewElement_instances","_TreeViewElement_autoExpandFrom","formInputContainer","some","m","newInputs","newInput","formInputPrototype","payload","path","getNodePath","inputValue","getFormInputValueForNode","JSON","stringify","push","replaceChildren","whenDefined","_TreeViewElement_nodeForEvent","rawPath","parse","getNodeType","markCurrentAtPath","pathStr","nodeToMark","CSS","escape","currentNode","expandAtPath","subTreeAtPath","expand","collapseAtPath","collapse","toggleAtPath","toggle","checkAtPath","nodeAtPath","setNodeCheckedValue","uncheckAtPath","toggleCheckedAtPath","getNodeCheckedValue","checkedValueAtPath","disabledValueAtPath","getNodeDisabledValue","selector","leafAtPath","toString","setNodeDisabledValue","nodeHasCheckBox","nodeHasNativeAction","HTMLButtonElement","expandAncestorsForNode","subTreeNode","eachAncestorSubTreeNode","expanded","infoFromNode","newCheckedValue","checkedValue","previousCheckedValue","eventTarget","_TreeViewElement_handleNodeEvent","_TreeViewElement_eventIsCheckboxToggle","_TreeViewElement_eventIsActivation","_TreeViewElement_handleNodeFocused","KeyboardEvent","_TreeViewElement_handleCheckboxToggle","_TreeViewElement_handleNodeActivated","HTMLDivElement","cancelable","_TreeViewElement_handleNodeKeyboardEvent","click","exports","observeMutationsUntilConditionMet","condition","mutationObserver","TreeViewIconPairElement","Boolean","collapsedIcon","expandedIcon","showExpanded","_TreeViewIconPairElement_instances","_TreeViewIconPairElement_update","showCollapsed","TreeViewSubTreeNodeElement","_TreeViewSubTreeNodeElement_expanded","_TreeViewSubTreeNodeElement_loadingState","_TreeViewSubTreeNodeElement_abortController","_TreeViewSubTreeNodeElement_activeElementIsLoader","subTree","_TreeViewSubTreeNodeElement_instances","_TreeViewSubTreeNodeElement_update","includeFragment","_TreeViewSubTreeNodeElement_handleIncludeFragmentEvent","retryButton","_TreeViewSubTreeNodeElement_handleRetryButtonEvent","selectStrategy","checkType","eachDirectDescendantNode","loadingState","newState","toggleButton","_TreeViewSubTreeNodeElement_handleToggleEvent","_TreeViewSubTreeNodeElement_handleKeyboardEvent","_TreeViewSubTreeNodeElement_checkboxElement_get","_TreeViewSubTreeNodeElement_handleCheckboxEvent","alreadyExpanded","treeView","alreadyCollapsed","nodes","leaf","eachDescendantNode","isEmpty","toggleChecked","newCheckValue","nodeInfos","rootInfo","info","nodeInfo","stopPropagation","loadingIndicator","refetch","iconPair","expandedToggleIcon","collapsedToggleIcon","loadingFailureMessage","_IncludeFragmentElement_instances","_IncludeFragmentElement_busy","_IncludeFragmentElement_observer","_IncludeFragmentElement_handleData","_IncludeFragmentElement_getData","_IncludeFragmentElement_getStringOrErrorData","_IncludeFragmentElement_task","_IncludeFragmentElement_fetchDataWithEvents","privateData","cspTrustedTypesPolicyPromise","IncludeFragmentElement","super","unobserve","loading","static","registry","policy","val","accept","data","attribute","oldVal","isConnected","textContent","request","Request","Accept","load","dataTreatedAsString","innerHTML","fragment","importNode","replaceWith","cachedData","reject","eventsToDispatch","setTimeout","eventType","Event","status","ct","x","match","responseText","createHTML","globalThis","ReferenceError","TreeViewIncludeFragmentElement","originalRequest","url","URL","searchParams"],"mappings":"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"}